<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Bloqade Shuttle"><link href=https://github.com/QuEraComputing/bloqade-shuttle/blog/category/tutorial/ rel=canonical><link href=../../ rel=prev><link href=../../archive/2025/ rel=next><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.21"><title>Tutorial - bloqade-shuttle</title><link rel=stylesheet href=../../../assets/stylesheets/main.2a3383ac.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../stylesheets/extra.css><link rel=stylesheet href=https://unpkg.com/katex@0/dist/katex.min.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=custom> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#tutorial class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title=bloqade-shuttle class="md-header__button md-logo" aria-label=bloqade-shuttle data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> bloqade-shuttle </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Tutorial </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=custom aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=custom data-md-color-accent=custom aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/QuEraComputing/bloqade-shuttle title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> bloqade-shuttle </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../ class=md-tabs__link> Blog </a> </li> <li class=md-tabs__item> <a href=../../../reference/bloqade/shuttle/prelude/ class=md-tabs__link> API Reference </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=bloqade-shuttle class="md-nav__button md-logo" aria-label=bloqade-shuttle data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> bloqade-shuttle </label> <div class=md-nav__source> <a href=https://github.com/QuEraComputing/bloqade-shuttle title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> bloqade-shuttle </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <div class="md-nav__link md-nav__container"> <a href=../../.. class="md-nav__link "> <span class=md-ellipsis> Home </span> </a> <label class="md-nav__link " for=__nav_1 id=__nav_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../install/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../../contrib/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <div class="md-nav__link md-nav__container"> <a href=../../ class="md-nav__link "> <span class=md-ellipsis> Blog </span> </a> <label class="md-nav__link " for=__nav_2 id=__nav_2_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex> <span class=md-ellipsis> Archive </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Archive </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../archive/2025/ class=md-nav__link> <span class=md-ellipsis> 2025 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3 checked> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex> <span class=md-ellipsis> Categories </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=true> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Categories </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Tutorial </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> API Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> API Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> Shuttle dialect group </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> Shuttle dialect group </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/bloqade/shuttle/prelude/ class=md-nav__link> <span class=md-ellipsis> Kernel decorator </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_2> <label class=md-nav__link for=__nav_3_1_2 id=__nav_3_1_2_label tabindex=0> <span class=md-ellipsis> Dialects </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_1_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1_2> <span class="md-nav__icon md-icon"></span> Dialects </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_2_1> <label class=md-nav__link for=__nav_3_1_2_1 id=__nav_3_1_2_1_label tabindex=0> <span class=md-ellipsis> action </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1_2_1> <span class="md-nav__icon md-icon"></span> action </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/bloqade/shuttle/dialects/action/_interface/ class=md-nav__link> <span class=md-ellipsis> statements </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_2_2> <label class=md-nav__link for=__nav_3_1_2_2 id=__nav_3_1_2_2_label tabindex=0> <span class=md-ellipsis> atom </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1_2_2> <span class="md-nav__icon md-icon"></span> atom </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/bloqade/shuttle/dialects/atom/_interface/ class=md-nav__link> <span class=md-ellipsis> statements </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_2_3> <label class=md-nav__link for=__nav_3_1_2_3 id=__nav_3_1_2_3_label tabindex=0> <span class=md-ellipsis> filled </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1_2_3> <span class="md-nav__icon md-icon"></span> filled </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/bloqade/shuttle/dialects/filled/_interface/ class=md-nav__link> <span class=md-ellipsis> statements </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_2_4> <label class=md-nav__link for=__nav_3_1_2_4 id=__nav_3_1_2_4_label tabindex=0> <span class=md-ellipsis> gate </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1_2_4> <span class="md-nav__icon md-icon"></span> gate </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/bloqade/shuttle/dialects/gate/_interface/ class=md-nav__link> <span class=md-ellipsis> statements </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_2_5> <label class=md-nav__link for=__nav_3_1_2_5 id=__nav_3_1_2_5_label tabindex=0> <span class=md-ellipsis> init </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1_2_5> <span class="md-nav__icon md-icon"></span> init </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/bloqade/shuttle/dialects/init/_interface/ class=md-nav__link> <span class=md-ellipsis> statements </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_2_6> <label class=md-nav__link for=__nav_3_1_2_6 id=__nav_3_1_2_6_label tabindex=0> <span class=md-ellipsis> measure </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_2_6_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1_2_6> <span class="md-nav__icon md-icon"></span> measure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/bloqade/shuttle/dialects/measure/_interface/ class=md-nav__link> <span class=md-ellipsis> statements </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_2_7> <label class=md-nav__link for=__nav_3_1_2_7 id=__nav_3_1_2_7_label tabindex=0> <span class=md-ellipsis> path </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_2_7_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1_2_7> <span class="md-nav__icon md-icon"></span> path </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/bloqade/shuttle/dialects/path/_interface.md class=md-nav__link> <span class=md-ellipsis> statements </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_2_8> <label class=md-nav__link for=__nav_3_1_2_8 id=__nav_3_1_2_8_label tabindex=0> <span class=md-ellipsis> schedule </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_2_8_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1_2_8> <span class="md-nav__icon md-icon"></span> schedule </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/bloqade/shuttle/dialects/schedule/_interface/ class=md-nav__link> <span class=md-ellipsis> statements </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_2_9> <label class=md-nav__link for=__nav_3_1_2_9 id=__nav_3_1_2_9_label tabindex=0> <span class=md-ellipsis> spec </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_2_9_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1_2_9> <span class="md-nav__icon md-icon"></span> spec </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/bloqade/shuttle/dialects/spec/_interface/ class=md-nav__link> <span class=md-ellipsis> statements </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_3> <div class="md-nav__link md-nav__container"> <a href=../../../reference/bloqade/shuttle/stdlib/ class="md-nav__link "> <span class=md-ellipsis> stdlib </span> </a> <label class="md-nav__link " for=__nav_3_1_3 id=__nav_3_1_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_1_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1_3> <span class="md-nav__icon md-icon"></span> stdlib </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/bloqade/shuttle/stdlib/moves/ class=md-nav__link> <span class=md-ellipsis> Moves </span> </a> </li> <li class=md-nav__item> <a href=../../../reference/bloqade/shuttle/stdlib/spec/ class=md-nav__link> <span class=md-ellipsis> Spec </span> </a> </li> <li class=md-nav__item> <a href=../../../reference/bloqade/shuttle/stdlib/waypoints/ class=md-nav__link> <span class=md-ellipsis> Waypoints </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_3_5> <div class="md-nav__link md-nav__container"> <a href=../../../reference/bloqade/shuttle/stdlib/layouts/ class="md-nav__link "> <span class=md-ellipsis> Layouts </span> </a> <label class="md-nav__link " for=__nav_3_1_3_5 id=__nav_3_1_3_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1_3_5> <span class="md-nav__icon md-icon"></span> Layouts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/bloqade/shuttle/stdlib/layouts/asserts/ class=md-nav__link> <span class=md-ellipsis> Asserts </span> </a> </li> <li class=md-nav__item> <a href=../../../reference/bloqade/shuttle/stdlib/layouts/single_col_zone/ class=md-nav__link> <span class=md-ellipsis> Single col zone </span> </a> </li> <li class=md-nav__item> <a href=../../../reference/bloqade/shuttle/stdlib/layouts/two_col_zone/ class=md-nav__link> <span class=md-ellipsis> Two col zone </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_3_5_5> <div class="md-nav__link md-nav__container"> <a href=../../../reference/bloqade/shuttle/stdlib/layouts/gemini/ class="md-nav__link "> <span class=md-ellipsis> Gemini </span> </a> <label class="md-nav__link " for=__nav_3_1_3_5_5 id=__nav_3_1_3_5_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_3_1_3_5_5_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1_3_5_5> <span class="md-nav__icon md-icon"></span> Gemini </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/bloqade/shuttle/stdlib/layouts/gemini/base_spec/ class=md-nav__link> <span class=md-ellipsis> Base spec </span> </a> </li> <li class=md-nav__item> <a href=../../../reference/bloqade/shuttle/stdlib/layouts/gemini/logical/ class=md-nav__link> <span class=md-ellipsis> Logical </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <div class=md-content__inner> <header class=md-typeset> <h1 id=tutorial>Tutorial</h1> </header> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img src=https://github.com/stefan-o.png alt="Stefan Ostermann"> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2025-08-04 00:00:00+00:00">August 4, 2025</time></li> <li class=md-meta__item> in <a href=./ class=md-meta__link>Tutorial</a></li> <li class=md-meta__item> 10 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=programming-moves-for-logical-magic-state-distillation><a href=../../2025/08/04/programming-moves-for-logical-magic-state-distillation/ class=toclink>Programming Moves for Logical Magic State Distillation</a></h2> <p>Download script <a download=MSD_moves.py href=../../scripts/MSD_moves.py>here</a>.</p> <p>In this example, we program the move layout employed in the demonstration of logical magic state distillation for a distance-5 color code, as presented in QuEra’s recent publication: <a href=https://arxiv.org/pdf/2506.14169><strong>“Experimental demonstration of logical magic state distillation”, Nature, 2025</strong></a>. This example focuses specifically on the atom moves and two-qubit gate operations between atom pairs. For clarity, we omit the single-qubit gates used in the full circuit. The circuits executed in the paper were carefully optimized for the architectural features of QuEra’s neutral atom hardware. In particular, they leverage extensive parallelization of atom shuttling operations and simultaneous execution of two-qubit gates.</p> <p>We will demonstrate that <code>bloqade.shuttle</code> provides a concise and efficient interface for expressing such parallelized atom movements.</p> <p>As a first step, we import the relevant modules of <code>bloqade.shuttle</code> and <code>kirin</code>.</p> <div class=highlight><pre><span></span><code><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=n>Any</span><span class=p>,</span> <span class=n>TypeVar</span>

<span class=kn>import</span><span class=w> </span><span class=nn>matplotlib</span>
<span class=kn>from</span><span class=w> </span><span class=nn>bloqade.geometry.dialects</span><span class=w> </span><span class=kn>import</span> <span class=n>grid</span>
<span class=kn>from</span><span class=w> </span><span class=nn>kirin.dialects</span><span class=w> </span><span class=kn>import</span> <span class=n>ilist</span>

<span class=kn>from</span><span class=w> </span><span class=nn>bloqade.shuttle</span><span class=w> </span><span class=kn>import</span> <span class=n>gate</span><span class=p>,</span> <span class=n>init</span><span class=p>,</span> <span class=n>spec</span>
<span class=kn>from</span><span class=w> </span><span class=nn>bloqade.shuttle.prelude</span><span class=w> </span><span class=kn>import</span> <span class=n>move</span>
<span class=kn>from</span><span class=w> </span><span class=nn>bloqade.shuttle.stdlib.spec</span><span class=w> </span><span class=kn>import</span> <span class=n>single_zone_spec</span>
<span class=kn>from</span><span class=w> </span><span class=nn>bloqade.shuttle.stdlib.waypoints</span><span class=w> </span><span class=kn>import</span> <span class=n>move_by_waypoints</span>
<span class=kn>from</span><span class=w> </span><span class=nn>bloqade.shuttle.visualizer</span><span class=w> </span><span class=kn>import</span> <span class=n>PathVisualizer</span>
</code></pre></div> <p>The primary subroutines used to implement atom transport are the <code>move</code> dialect and the <code>move_by_waypoints</code> function from the standard library. Programming atom movement in shuttle is centered around atoms arranged on two-dimensional grids. This reflects the capabilities of QuEra’s Gemini-class hardware, which utilizes pairs of acousto-optic deflectors (AODs) to manipulate atom positions independently in the x- and y-directions.</p> <p>Grid-based layouts are chosen to optimize both the accessibility and parallelizability of atom moves, given AOD constraints such as simultaneous pickup of atoms aligned along columns and rows, as well as the need to prevent inter-atomic collisions during transport. The shuttle framework encodes AOD constraints directly into the semantics of move kernel objects. Attempting to compile or execute a move sequence that violates these constraints will result in a runtime or compile-time error, ensuring physical feasibility of the programmed layout on hardware</p> <p>As a first step, we define three global parameters that govern the geometry and dynamics of the atom array:</p> <ul> <li> <p><code>grid_spacing</code>: Specifies the lattice spacing of the initial two-dimensional grid. This grid corresponds to the static trap array defined by the spatial light modulator (SLM), which generates the optical tweezers used to hold the atoms.</p> </li> <li> <p><code>entangling_pair_dist</code>: Sets the target distance between pairs of atoms that are intended to undergo a two-qubit entangling gate. This distance must be sufficiently small to enable a strong Rydberg-mediated interaction, which is essential for high-fidelity entanglement. A typical value used in experiments is 2 μm.</p> </li> <li> <p><code>path_shift_dist</code>: During atom transport, it is often necessary to temporarily displace atoms off-grid to avoid collisions when crossing rows or columns. This parameter defines the offset applied to atoms during their movement, enabling collision-free shuttling through the array.</p> </li> </ul> <p>As a first step we define the global geometry choices.</p> <div class=highlight><pre><span></span><code><span class=n>grid_spacing</span> <span class=o>=</span> <span class=mf>10.0</span>  <span class=c1># (1)!</span>

<span class=n>entangling_pair_dist</span> <span class=o>=</span> <span class=mf>2.0</span>  <span class=c1># (2)!</span>

<span class=n>path_shift_dist</span> <span class=o>=</span> <span class=p>(</span>
    <span class=mf>3.0</span>  <span class=c1># (3)!</span>
<span class=p>)</span>
</code></pre></div> <ol> <li>spacing of the grid traps</li> <li>distance between atom pairs getting entangled</li> <li>distance that is used to shift the atom path out of the columns or rows</li> </ol> <h2 id=basic-move-pattern><a class=toclink href=../../2025/08/04/programming-moves-for-logical-magic-state-distillation/#basic-move-pattern>Basic move pattern</a></h2> <p>In this section, we program the precise atom movement pattern used in the experimental demonstration of logical magic state distillation. Due to the high degree of connectivity required by the circuit, atom transport is restricted to full-row and full-column movements, maximizing parallelism while respecting hardware constraints.</p> <p>We begin by specifying the initial atom grid configuration. This example focuses on a single entangling zone layout, where each logical qubit is encoded along a single row of atoms. For a distance-5 color code, each logical qubit comprises 17 physical qubits. The experimental implementation involved five such logical qubits.</p> <p>This geometry is conveniently defined using the <code>single_zone_spec</code> function, where:</p> <ul> <li><code>num_x</code> specifies the number of columns (i.e., physical qubits per logical qubit),</li> <li><code>num_y</code> specifies the number of rows (i.e., logical qubits), and</li> <li><code>spacing</code> defines the uniform distance between adjacent rows and columns.</li> </ul> <p>By construction, the grid is assumed to be equidistant in both spatial dimensions.</p> <div class=highlight><pre><span></span><code><span class=n>arch_spec</span> <span class=o>=</span> <span class=n>single_zone_spec</span><span class=p>(</span><span class=n>num_x</span><span class=o>=</span><span class=mi>17</span><span class=p>,</span> <span class=n>num_y</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span> <span class=n>spacing</span><span class=o>=</span><span class=n>grid_spacing</span><span class=p>)</span>
</code></pre></div> <p>We define a set of helper kernel functions to enable coordinated movement of atoms along rows and columns of the grid. The core routine, <code>entangle_cols</code>, operates on two <code>IList</code> arguments -- <code>ctrls</code> and <code>qargs</code>. The <code>ctrls</code> list specifies the row indices of control qubits to be moved, while <code>qargs</code> indicates the row indices of the target qubits with which entanglement is to be performed.</p> <p>To register the function as a valid movement kernel for compilation to <code>bloqade.shuttle</code> IR, we decorate it with <code>@move</code>. This ensures compatibility with <code>kirin</code>’s intermediate representation and hardware-aware compilation pipeline.</p> <p>The structure of the entangling routine comprises the following key steps:</p> <ol> <li> <p>Define initial trap sites: Specify the locations of static SLM-defined traps where all qubits are initially held.</p> </li> <li> <p>Construct subgrids: Define subgrids corresponding to the atoms to be picked up (<code>ctrls</code>), and subgrids defining the positions of the target qubits (<code>qargs</code>) near which the control atoms will be temporarily positioned to enable interaction.</p> </li> <li> <p>Specify waypoint trajectories: Construct ordered sequences of intermediate positions (waypoints) to guide atom transport between subgrids.</p> </li> <li> <p>Invoke <code>move_by_waypoints</code>: Use this function to concatenate the defined path segments, producing the full motion trajectory between initial and final subgrid configurations.</p> </li> </ol> <p>It is important to note that, in this layout, atoms always return to their original static trap positions following each entangling operation. This symmetry enables easy definition of the reverse path by simply inverting the sequence of waypoints.</p> <p>The <code>move_by_waypoints</code> function includes Boolean flags that indicate whether atoms should be picked up from or dropped into static traps at each stage. In the context of this circuit, we maintain atoms within the AODs during gate execution and only return them to their SLM-defined traps afterward. This is a deliberate design choice and not a general constraint. More sophisticated pickup/dropoff sequences can be constructed using multiple defined trap grids. However, care must be taken: dropping an atom at a site lacking an active trap will result in atom loss.</p> <div class=highlight><pre><span></span><code><span class=nd>@move</span>
<span class=k>def</span><span class=w> </span><span class=nf>entangle_cols</span><span class=p>(</span><span class=n>ctrls</span><span class=p>:</span> <span class=n>ilist</span><span class=o>.</span><span class=n>IList</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span> <span class=n>qargs</span><span class=p>:</span> <span class=n>ilist</span><span class=o>.</span><span class=n>IList</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=n>Any</span><span class=p>]):</span> <span class=c1># (1)!</span>

    <span class=c1># set up zone layout</span>
    <span class=n>zone</span> <span class=o>=</span> <span class=n>spec</span><span class=o>.</span><span class=n>get_static_trap</span><span class=p>(</span><span class=n>zone_id</span><span class=o>=</span><span class=s2>&quot;traps&quot;</span><span class=p>)</span> <span class=c1># (2)!</span>
    <span class=n>traps_shape</span> <span class=o>=</span> <span class=n>grid</span><span class=o>.</span><span class=n>shape</span><span class=p>(</span><span class=n>zone</span><span class=p>)</span> <span class=c1># (3)!</span>
    <span class=n>all_rows</span> <span class=o>=</span> <span class=n>ilist</span><span class=o>.</span><span class=n>range</span><span class=p>(</span><span class=n>traps_shape</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span> <span class=c1># (4)!</span>

    <span class=n>src</span> <span class=o>=</span> <span class=n>grid</span><span class=o>.</span><span class=n>sub_grid</span><span class=p>(</span><span class=n>zone</span><span class=p>,</span> <span class=n>ctrls</span><span class=p>,</span> <span class=n>all_rows</span><span class=p>)</span> <span class=c1># (5)!</span>
    <span class=n>dst</span> <span class=o>=</span> <span class=n>grid</span><span class=o>.</span><span class=n>sub_grid</span><span class=p>(</span><span class=n>zone</span><span class=p>,</span> <span class=n>qargs</span><span class=p>,</span> <span class=n>all_rows</span><span class=p>)</span> <span class=c1># (6)!</span>

    <span class=c1># define the moves</span>
    <span class=n>first_waypoint</span> <span class=o>=</span> <span class=n>grid</span><span class=o>.</span><span class=n>shift</span><span class=p>(</span><span class=n>src</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=o>-</span><span class=n>path_shift_dist</span><span class=p>)</span> <span class=c1># (7)!</span>
    <span class=n>second_waypoint</span> <span class=o>=</span> <span class=n>grid</span><span class=o>.</span><span class=n>shift</span><span class=p>(</span><span class=n>dst</span><span class=p>,</span> <span class=o>-</span><span class=n>entangling_pair_dist</span><span class=p>,</span> <span class=o>-</span><span class=n>path_shift_dist</span><span class=p>)</span> <span class=c1># (8)!</span>
    <span class=n>third_waypoint</span> <span class=o>=</span> <span class=n>grid</span><span class=o>.</span><span class=n>shift</span><span class=p>(</span><span class=n>dst</span><span class=p>,</span> <span class=o>-</span><span class=n>entangling_pair_dist</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>)</span> <span class=c1># (9)!</span>

    <span class=n>waypoints</span> <span class=o>=</span> <span class=n>ilist</span><span class=o>.</span><span class=n>IList</span><span class=p>([</span><span class=n>src</span><span class=p>,</span> <span class=n>first_waypoint</span><span class=p>,</span> <span class=n>second_waypoint</span><span class=p>,</span> <span class=n>third_waypoint</span><span class=p>])</span> <span class=c1># (10)!</span>

    <span class=n>reverse_waypoints</span> <span class=o>=</span> <span class=n>ilist</span><span class=o>.</span><span class=n>IList</span><span class=p>(</span>
        <span class=p>[</span><span class=n>third_waypoint</span><span class=p>,</span> <span class=n>second_waypoint</span><span class=p>,</span> <span class=n>first_waypoint</span><span class=p>,</span> <span class=n>src</span><span class=p>]</span>
    <span class=p>)</span> <span class=c1># (11)!</span>

    <span class=n>move_by_waypoints</span><span class=p>(</span><span class=n>waypoints</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span> <span class=c1># (12)!</span>
    <span class=n>gate</span><span class=o>.</span><span class=n>top_hat_cz</span><span class=p>(</span><span class=n>zone</span><span class=p>)</span> <span class=c1># (13)!</span>
    <span class=n>move_by_waypoints</span><span class=p>(</span><span class=n>reverse_waypoints</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span> <span class=c1># (14)!</span>
</code></pre></div> <ol> <li>kernel function to entangle columns of atoms. <code>ctrls</code>...subgrid of atoms to be picked up, <code>qargs</code>...subgrid of atoms the ctrl qubits will get entangled with</li> <li>fill the defined zone specification with traps</li> <li>get the shape of the trap array</li> <li>generate an ilist from 0 to the number of rows in the trap array</li> <li>subgrid of control qubits that are picked up</li> <li>subgrid of target qubits that are entangled with the control qubits</li> <li>shifting the src grid down along the y-axis</li> <li>shift the moving cols to the respective x-positions of the target qubits and add an offset in the x-direction</li> <li>shift the moving cols back up into the original y-position to form atom pairs that will get a gate</li> <li>combine the waypoints into an ilist</li> <li>the reverse waypoints defining the reverse path back to the original positions</li> <li>move the qubits along the waypoints, True means that the atoms are picked up and False means that they are not dropped at the end of the move</li> <li>apply the entangling gate to the atoms that are now in the right positions (paired up)</li> <li>move the atoms back to their original positions, False means that the atoms are not picked up (since they are still in the AOD) and True means that they are dropped back into their static trap site at the end of the move</li> </ol> <p>In an analogous manner, we can now define parallel transport operations for atoms along rows of the grid.</p> <div class=highlight><pre><span></span><code><span class=nd>@move</span>
<span class=k>def</span><span class=w> </span><span class=nf>entangle_rows</span><span class=p>(</span><span class=n>ctrls</span><span class=p>:</span> <span class=n>ilist</span><span class=o>.</span><span class=n>IList</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span> <span class=n>qargs</span><span class=p>:</span> <span class=n>ilist</span><span class=o>.</span><span class=n>IList</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=n>Any</span><span class=p>]):</span> <span class=c1># (1)!</span>

    <span class=c1># set up zone layout</span>
    <span class=n>zone</span> <span class=o>=</span> <span class=n>spec</span><span class=o>.</span><span class=n>get_static_trap</span><span class=p>(</span><span class=n>zone_id</span><span class=o>=</span><span class=s2>&quot;traps&quot;</span><span class=p>)</span> <span class=c1># (2)!</span>
    <span class=n>traps_shape</span> <span class=o>=</span> <span class=n>grid</span><span class=o>.</span><span class=n>shape</span><span class=p>(</span><span class=n>zone</span><span class=p>)</span> <span class=c1># (3)!</span>
    <span class=n>all_cols</span> <span class=o>=</span> <span class=n>ilist</span><span class=o>.</span><span class=n>range</span><span class=p>(</span><span class=n>traps_shape</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span> <span class=c1># (4)!</span>

    <span class=n>src</span> <span class=o>=</span> <span class=n>grid</span><span class=o>.</span><span class=n>sub_grid</span><span class=p>(</span><span class=n>zone</span><span class=p>,</span> <span class=n>all_cols</span><span class=p>,</span> <span class=n>ctrls</span><span class=p>)</span>
    <span class=n>dst</span> <span class=o>=</span> <span class=n>grid</span><span class=o>.</span><span class=n>sub_grid</span><span class=p>(</span><span class=n>zone</span><span class=p>,</span> <span class=n>all_cols</span><span class=p>,</span> <span class=n>qargs</span><span class=p>)</span>

    <span class=c1># define the moves</span>
    <span class=n>first_waypoint</span> <span class=o>=</span> <span class=n>grid</span><span class=o>.</span><span class=n>shift</span><span class=p>(</span><span class=n>src</span><span class=p>,</span> <span class=n>entangling_pair_dist</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>)</span> <span class=c1># (5)!</span>
    <span class=n>second_waypoint</span> <span class=o>=</span> <span class=n>grid</span><span class=o>.</span><span class=n>shift</span><span class=p>(</span><span class=n>dst</span><span class=p>,</span> <span class=n>entangling_pair_dist</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>)</span> <span class=c1># (6)!</span>

    <span class=n>waypoints</span> <span class=o>=</span> <span class=n>ilist</span><span class=o>.</span><span class=n>IList</span><span class=p>([</span><span class=n>src</span><span class=p>,</span> <span class=n>first_waypoint</span><span class=p>,</span> <span class=n>second_waypoint</span><span class=p>])</span> <span class=c1># (7)!</span>
    <span class=n>reverse_waypoints</span> <span class=o>=</span> <span class=n>ilist</span><span class=o>.</span><span class=n>IList</span><span class=p>([</span><span class=n>second_waypoint</span><span class=p>,</span> <span class=n>first_waypoint</span><span class=p>,</span> <span class=n>src</span><span class=p>])</span> <span class=c1># (8)!</span>

    <span class=n>move_by_waypoints</span><span class=p>(</span><span class=n>waypoints</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span> <span class=c1># (9)!</span>
    <span class=n>gate</span><span class=o>.</span><span class=n>top_hat_cz</span><span class=p>(</span><span class=n>zone</span><span class=p>)</span> <span class=c1># (10)!</span>
    <span class=n>move_by_waypoints</span><span class=p>(</span><span class=n>reverse_waypoints</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span> <span class=c1># (11)!</span>
</code></pre></div> <ol> <li>kernel function to entangle rows of atoms. <code>ctrls</code>...subgrid of atoms to be picked up, <code>qargs</code>...subgrid of atoms the ctrl qubits will get entangled with</li> <li>get the positions of the static traps in the entangling zone</li> <li>get the shape of the trap array</li> <li>generate an ilist from 0 to the number of columns in the trap array</li> <li>shift the src grid to the right along the x-axis</li> <li>move the src grid to the y-positions of the target qubits</li> <li>combine the waypoints into an ilist</li> <li>the reverse waypoints defining the reverse path back to the original positions</li> <li>move the qubits along the waypoints, True means that the atoms are picked up and False means that they are not dropped at the end of the move</li> <li>apply the entangling gate to the atoms that are now in the right positions (paired up)</li> <li>move the atoms back to their original positions, False means that the atoms are not picked up (since they are still in the AOD) and True means that they are dropped back into their static trap site at the end of the move</li> </ol> <p>Using these helper functions, we can now specify the complete move pattern in just a few lines of code by providing the control and target atom indices to the <code>entangle_cols</code> and <code>entangle_rows</code> functions.</p> <p>As before, we define this as a kernel function, annotated with the <code>@move</code> decorator to indicate compatibility with the bloqade.shuttle IR. This kernel is wrapped inside a closure and returned as a first-class move kernel function.</p> <div class=highlight><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>make_main</span><span class=p>(</span><span class=n>entangle_cols</span><span class=p>,</span> <span class=n>entangle_rows</span><span class=p>):</span> <span class=c1># (1)!</span>

    <span class=nd>@move</span>
    <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span> <span class=c1># (2)!</span>

        <span class=n>init</span><span class=o>.</span><span class=n>fill</span><span class=p>([</span><span class=n>spec</span><span class=o>.</span><span class=n>get_static_trap</span><span class=p>(</span><span class=n>zone_id</span><span class=o>=</span><span class=s2>&quot;traps&quot;</span><span class=p>)])</span>

        <span class=c1># encode logical qubits by entangling pairs of atoms in columns</span>
        <span class=n>entangle_cols</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>12</span><span class=p>,</span> <span class=mi>13</span><span class=p>],</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>14</span><span class=p>,</span> <span class=mi>16</span><span class=p>])</span>
        <span class=n>entangle_cols</span><span class=p>([</span><span class=mi>4</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mi>15</span><span class=p>],</span> <span class=p>[</span><span class=mi>7</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>14</span><span class=p>,</span> <span class=mi>16</span><span class=p>])</span>
        <span class=n>entangle_cols</span><span class=p>([</span><span class=mi>2</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>9</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>14</span><span class=p>],</span> <span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>13</span><span class=p>,</span> <span class=mi>16</span><span class=p>])</span>
        <span class=n>entangle_cols</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>11</span><span class=p>],</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>12</span><span class=p>,</span> <span class=mi>13</span><span class=p>])</span>
        <span class=n>entangle_cols</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>12</span><span class=p>],</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>9</span><span class=p>,</span> <span class=mi>15</span><span class=p>])</span>

        <span class=c1># logical qubit operations by moving entire rows of atoms</span>
        <span class=n>entangle_rows</span><span class=p>([</span><span class=mi>0</span><span class=p>,</span> <span class=mi>2</span><span class=p>],</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span>
        <span class=n>entangle_rows</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=mi>2</span><span class=p>,</span> <span class=mi>4</span><span class=p>])</span>
        <span class=n>entangle_rows</span><span class=p>([</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>])</span>

    <span class=k>return</span> <span class=n>main</span>


<span class=n>ker</span> <span class=o>=</span> <span class=n>make_main</span><span class=p>(</span><span class=n>entangle_cols</span><span class=p>,</span> <span class=n>entangle_rows</span><span class=p>)</span>
</code></pre></div> <ol> <li>Helper function to create the main move kernel for logical magic state distillation. <code>entangle_cols</code>: Function to entangle columns of atoms. <code>entangle_rows</code>: Function to entangle rows of atoms. Returns <code>main</code>: The main move kernel function that defines the entire move pattern.</li> <li>Main move kernel function that defines the entire move pattern for the logical magic state distillation experiment.</li> </ol> <p>We can verify the correctness of the programmed move layout using the <code>PathVisualizer</code> utility provided by <code>bloqade.shuttle</code>. This tool displays the atom trajectories between defined waypoints and enables stepwise inspection of the full movement sequence via the <code>Continue</code> button. Red flashes are used to indicate the application of two-qubit gate pulses at the entangling zone during the sequence.</p> <div class=highlight><pre><span></span><code><span class=n>matplotlib</span><span class=o>.</span><span class=n>use</span><span class=p>(</span><span class=s2>&quot;TkAgg&quot;</span><span class=p>)</span>  <span class=c1># (1)!</span>

<span class=n>PathVisualizer</span><span class=p>(</span><span class=n>ker</span><span class=o>.</span><span class=n>dialects</span><span class=p>,</span> <span class=n>arch_spec</span><span class=o>=</span><span class=n>arch_spec</span><span class=p>)</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>ker</span><span class=p>,</span> <span class=p>())</span>
</code></pre></div> <ol> <li>requirement for PathVisualizer</li> </ol> <h2 id=further-refining-the-move-pattern><a class=toclink href=../../2025/08/04/programming-moves-for-logical-magic-state-distillation/#further-refining-the-move-pattern>Further refining the move pattern</a></h2> <p>We now take a further step by introducing a slight optimization to the move pattern. In the previous example, control qubits were moved in both leftward and rightward directions, but ultimately all were positioned to the left of their respective target qubits. This introduces unnecessary displacement for half of the control atoms. To minimize total movement, we can instead position control atoms to the nearest side of the target qubits, i.e., those moving rightward are placed to the left, and those moving leftward are placed to the right of the targets.</p> <p>To implement this, we define an additional helper function that computes the nearest feasible final position for each control qubit, given the target layout and movement direction.</p> <div class=highlight><pre><span></span><code><span class=n>N</span> <span class=o>=</span> <span class=n>TypeVar</span><span class=p>(</span><span class=s2>&quot;N&quot;</span><span class=p>)</span>


<span class=nd>@move</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_final_positions</span><span class=p>(</span>
    <span class=n>src</span><span class=p>:</span> <span class=n>ilist</span><span class=o>.</span><span class=n>IList</span><span class=p>[</span><span class=nb>float</span><span class=p>,</span> <span class=n>N</span><span class=p>],</span> <span class=n>dst</span><span class=p>:</span> <span class=n>ilist</span><span class=o>.</span><span class=n>IList</span><span class=p>[</span><span class=nb>float</span><span class=p>,</span> <span class=n>N</span><span class=p>],</span> <span class=n>offset</span><span class=p>:</span> <span class=nb>float</span>
<span class=p>):</span> <span class=c1># (1)!</span>

    <span class=k>assert</span> <span class=nb>len</span><span class=p>(</span><span class=n>src</span><span class=p>)</span> <span class=o>==</span> <span class=nb>len</span><span class=p>(</span>
        <span class=n>dst</span>
    <span class=p>),</span> <span class=s2>&quot;Source and destination lists must be of the same length.&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_last_pos</span><span class=p>(</span><span class=n>i</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>float</span><span class=p>:</span>
        <span class=k>assert</span> <span class=n>src</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>!=</span> <span class=n>dst</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=s2>&quot;Source and destination positions must not be equal.&quot;</span>
        <span class=k>if</span> <span class=n>src</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>dst</span><span class=p>[</span><span class=n>i</span><span class=p>]:</span>
            <span class=k>return</span> <span class=n>dst</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>-</span> <span class=n>offset</span>
        <span class=k>elif</span> <span class=n>src</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>&gt;</span> <span class=n>dst</span><span class=p>[</span><span class=n>i</span><span class=p>]:</span>
            <span class=k>return</span> <span class=n>dst</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>+</span> <span class=n>offset</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>dst</span><span class=p>[</span><span class=n>i</span><span class=p>]</span>

    <span class=k>return</span> <span class=n>ilist</span><span class=o>.</span><span class=n>map</span><span class=p>(</span><span class=n>get_last_pos</span><span class=p>,</span> <span class=n>ilist</span><span class=o>.</span><span class=n>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>src</span><span class=p>)))</span>
</code></pre></div> <ol> <li>Helper function to compute the nearest final positions for entanglement.</li> </ol> <p>Using this helper function, we can now construct new waypoint sequences that incorporate the nearest final positions for the control qubits.</p> <div class=highlight><pre><span></span><code><span class=nd>@move</span>
<span class=k>def</span><span class=w> </span><span class=nf>entangle_cols_low_dist</span><span class=p>(</span><span class=n>ctrls</span><span class=p>:</span> <span class=n>ilist</span><span class=o>.</span><span class=n>IList</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span> <span class=n>qargs</span><span class=p>:</span> <span class=n>ilist</span><span class=o>.</span><span class=n>IList</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=n>Any</span><span class=p>]):</span> <span class=c1># (1)!</span>

    <span class=n>zone</span> <span class=o>=</span> <span class=n>spec</span><span class=o>.</span><span class=n>get_static_trap</span><span class=p>(</span><span class=n>zone_id</span><span class=o>=</span><span class=s2>&quot;traps&quot;</span><span class=p>)</span>
    <span class=n>traps_shape</span> <span class=o>=</span> <span class=n>grid</span><span class=o>.</span><span class=n>shape</span><span class=p>(</span><span class=n>zone</span><span class=p>)</span>
    <span class=n>all_rows</span> <span class=o>=</span> <span class=n>ilist</span><span class=o>.</span><span class=n>range</span><span class=p>(</span><span class=n>traps_shape</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>

    <span class=n>src</span> <span class=o>=</span> <span class=n>grid</span><span class=o>.</span><span class=n>sub_grid</span><span class=p>(</span><span class=n>zone</span><span class=p>,</span> <span class=n>ctrls</span><span class=p>,</span> <span class=n>all_rows</span><span class=p>)</span>
    <span class=n>dst</span> <span class=o>=</span> <span class=n>grid</span><span class=o>.</span><span class=n>sub_grid</span><span class=p>(</span><span class=n>zone</span><span class=p>,</span> <span class=n>qargs</span><span class=p>,</span> <span class=n>all_rows</span><span class=p>)</span>

    <span class=n>first_waypoint</span> <span class=o>=</span> <span class=n>grid</span><span class=o>.</span><span class=n>shift</span><span class=p>(</span><span class=n>src</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=o>-</span><span class=n>path_shift_dist</span><span class=p>)</span>

    <span class=n>dst_x</span> <span class=o>=</span> <span class=n>grid</span><span class=o>.</span><span class=n>get_xpos</span><span class=p>(</span><span class=n>dst</span><span class=p>)</span>
    <span class=n>src_x</span> <span class=o>=</span> <span class=n>grid</span><span class=o>.</span><span class=n>get_xpos</span><span class=p>(</span><span class=n>src</span><span class=p>)</span>

    <span class=n>last_x</span> <span class=o>=</span> <span class=n>get_final_positions</span><span class=p>(</span>
        <span class=n>src_x</span><span class=p>,</span> <span class=n>dst_x</span><span class=p>,</span> <span class=n>entangling_pair_dist</span>
    <span class=p>)</span>  <span class=c1># (2)!</span>

    <span class=n>second_pos</span> <span class=o>=</span> <span class=n>grid</span><span class=o>.</span><span class=n>from_positions</span><span class=p>(</span><span class=n>last_x</span><span class=p>,</span> <span class=n>grid</span><span class=o>.</span><span class=n>get_ypos</span><span class=p>(</span><span class=n>first_waypoint</span><span class=p>))</span>
    <span class=n>last_pos</span> <span class=o>=</span> <span class=n>grid</span><span class=o>.</span><span class=n>from_positions</span><span class=p>(</span><span class=n>last_x</span><span class=p>,</span> <span class=n>grid</span><span class=o>.</span><span class=n>get_ypos</span><span class=p>(</span><span class=n>dst</span><span class=p>))</span>

    <span class=n>waypoints</span> <span class=o>=</span> <span class=n>ilist</span><span class=o>.</span><span class=n>IList</span><span class=p>([</span><span class=n>src</span><span class=p>,</span> <span class=n>first_waypoint</span><span class=p>,</span> <span class=n>second_pos</span><span class=p>,</span> <span class=n>last_pos</span><span class=p>])</span>
    <span class=n>reverse_waypoints</span> <span class=o>=</span> <span class=n>ilist</span><span class=o>.</span><span class=n>IList</span><span class=p>([</span><span class=n>last_pos</span><span class=p>,</span> <span class=n>second_pos</span><span class=p>,</span> <span class=n>first_waypoint</span><span class=p>,</span> <span class=n>src</span><span class=p>])</span>

    <span class=n>move_by_waypoints</span><span class=p>(</span><span class=n>waypoints</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>
    <span class=n>gate</span><span class=o>.</span><span class=n>top_hat_cz</span><span class=p>(</span><span class=n>zone</span><span class=p>)</span>
    <span class=n>move_by_waypoints</span><span class=p>(</span><span class=n>reverse_waypoints</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
</code></pre></div> <ol> <li>Helper function to entangle columns of atoms on a grid in a single entangling zone with optimized final positions (nearest location). <code>ctrls</code>...subgrid of atoms to be picked up, <code>qargs</code>...subgrid of atoms the ctrl qubits will get entangled with</li> <li>get the nearest final positions for the control qubits</li> </ol> <p>We can now define a new move kernel that implements the optimized column-wise transport pattern using the updated waypoint assignments.</p> <div class=highlight><pre><span></span><code><span class=n>ker</span> <span class=o>=</span> <span class=n>make_main</span><span class=p>(</span><span class=n>entangle_cols_low_dist</span><span class=p>,</span> <span class=n>entangle_rows</span><span class=p>)</span>
</code></pre></div> <p>Finally, we can once again visualize the optimized move pattern using the PathVisualizer to inspect the resulting trajectories and validate the updated layout.</p> <div class=highlight><pre><span></span><code><span class=n>matplotlib</span><span class=o>.</span><span class=n>use</span><span class=p>(</span><span class=s2>&quot;TkAgg&quot;</span><span class=p>)</span> <span class=c1># (1)!</span>

<span class=n>PathVisualizer</span><span class=p>(</span><span class=n>ker</span><span class=o>.</span><span class=n>dialects</span><span class=p>,</span> <span class=n>arch_spec</span><span class=o>=</span><span class=n>arch_spec</span><span class=p>)</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>ker</span><span class=p>,</span> <span class=p>())</span>
</code></pre></div> <ol> <li>requirement for PathVisualizer</li> </ol> </div> </article> <nav class=md-pagination> </nav> </div> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../../ class="md-footer__link md-footer__link--prev" aria-label="Previous: Blog"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Blog </div> </div> </a> <a href=../../archive/2025/ class="md-footer__link md-footer__link--next" aria-label="Next: 2025"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> 2025 </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2024- QuEra Computing, Inc. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://x.com/QueraComputing target=_blank rel=noopener title=x.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"/></svg> </a> <a href=https://www.linkedin.com/company/quera-computing-inc/ target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["announce.dismiss", "content.action.view", "content.action.edit", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "navigation.footer", "search.highlight", "search.suggest", "toc.follow"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../assets/javascripts/bundle.f55a23d4.min.js></script> <script src=../../../scripts/katex.js></script> <script src=https://unpkg.com/katex@0/dist/katex.min.js></script> <script src=https://unpkg.com/katex@0/dist/contrib/auto-render.min.js></script> </body> </html>